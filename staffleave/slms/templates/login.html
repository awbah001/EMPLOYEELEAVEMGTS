<!DOCTYPE html>
<html lang="en">
    {% load static %}
    <head>
        <!-- Title -->
        <title>HarmonyLeave (E/SLMS) | Sign In</title>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <meta charset="UTF-8">
        <meta name="description" content="HarmonyLeave (E/SLMS) - Secure Login" />
        <meta name="keywords" content="staff,leave,management,login" />
        <meta name="author" content="HarmonyLeave" />
        
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <!-- Material Icons - Multiple sources for better loading -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        
        <!-- Styles -->
        <link href="{% static 'assets/css/custom.css' %}?v=2024e" rel="stylesheet" type="text/css"/>
        
        <style>
            /* Additional styles for icons */
            .material-icons {
                font-family: 'Material Icons';
                font-weight: normal;
                font-style: normal;
                font-size: 24px;
                line-height: 1;
                letter-spacing: normal;
                text-transform: none;
                display: inline-block;
                white-space: nowrap;
                word-wrap: normal;
                direction: ltr;
                -webkit-font-feature-settings: 'liga';
                -webkit-font-smoothing: antialiased;
            }

            /* Login Page Animations */
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes fadeInDown {
                from {
                    opacity: 0;
                    transform: translateY(-30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes slideInLeft {
                from {
                    opacity: 0;
                    transform: translateX(-50px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes slideInRight {
                from {
                    opacity: 0;
                    transform: translateX(50px);
                }
                to {
                    opacity: 1;
                    transform: translateX(0);
                }
            }

            @keyframes pulse {
                0%, 100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.05);
                }
            }

            @keyframes float {
                0%, 100% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-10px);
                }
            }

            @keyframes shimmer {
                0% {
                    background-position: -1000px 0;
                }
                100% {
                    background-position: 1000px 0;
                }
            }

            /* Initial hidden state for animated elements */
            .auth-container {
                animation: fadeInUp 0.6s ease-out;
            }

            .auth-wrapper {
                animation: fadeInUp 0.8s ease-out 0.2s both;
            }

            .auth-welcome {
                animation: slideInLeft 0.8s ease-out 0.3s both;
            }

            .auth-form {
                animation: slideInRight 0.8s ease-out 0.3s both;
            }

            /* Logo animation */
            .auth-welcome img {
                animation: fadeInDown 0.8s ease-out 0.5s both, float 3s ease-in-out 1.5s infinite;
                transition: transform 0.3s ease;
            }

            .auth-welcome img:hover {
                transform: scale(1.1) translateY(-5px);
            }

            /* Welcome content animations */
            .welcome-content > div:first-child {
                animation: fadeInDown 0.8s ease-out 0.5s both;
            }

            .welcome-subtitle {
                animation: fadeInUp 0.6s ease-out 0.7s both;
            }

            .welcome-content h1 {
                animation: fadeInUp 0.6s ease-out 0.8s both;
                position: relative;
            }

            .welcome-content p {
                animation: fadeInUp 0.6s ease-out 1s both;
            }

            .welcome-content p:last-of-type {
                animation: fadeInUp 0.6s ease-out 1.1s both;
            }

            /* Form animations */
            .auth-form h2 {
                animation: fadeInDown 0.6s ease-out 0.4s both;
            }

            .form-group {
                animation: fadeInUp 0.6s ease-out both;
                opacity: 0;
            }

            .form-group:nth-child(1) {
                animation-delay: 0.5s;
            }

            .form-group:nth-child(2) {
                animation-delay: 0.6s;
            }

            /* Enhanced input focus animation */
            .form-input {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
            }

            .form-input:focus {
                transform: translateY(-2px);
                box-shadow: 0 0 0 3px rgba(45, 90, 160, 0.1), 0 4px 12px rgba(45, 90, 160, 0.15);
            }

            /* Input icon animation */
            .input-icon {
                transition: all 0.3s ease;
            }

            .form-group:focus-within .input-icon {
                transform: translateY(-50%) scale(1.2);
                color: var(--primary-blue);
            }

            /* Button animations */
            .btn-primary {
                position: relative;
                overflow: hidden;
                animation: fadeInUp 0.6s ease-out 0.8s both;
                opacity: 0;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .btn-primary::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.3);
                transform: translate(-50%, -50%);
                transition: width 0.6s, height 0.6s;
            }

            .btn-primary:hover::before {
                width: 300px;
                height: 300px;
            }

            .btn-primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(45, 90, 160, 0.3);
            }

            .btn-primary:active {
                transform: translateY(0);
            }

            /* Button icon animation */
            .btn-primary i {
                transition: transform 0.3s ease;
            }

            .btn-primary:hover i {
                transform: translateX(3px);
            }

            /* Alert animation */
            .alert {
                animation: slideInRight 0.5s ease-out, shake 0.5s ease-out 0.5s;
            }

            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }

            /* Loading spinner enhancement */
            .loading {
                display: inline-block;
                width: 18px;
                height: 18px;
                border: 2px solid rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                border-top-color: var(--white);
                animation: spin 0.8s linear infinite;
                margin-right: 8px;
            }

            @keyframes spin {
                to { transform: rotate(360deg); }
            }

            /* Footer animation */
            .auth-form > div:last-child {
                animation: fadeInUp 0.6s ease-out 1s both;
                opacity: 0;
            }

            /* Enhanced background animation */
            .auth-container::before {
                animation: float 20s ease-in-out infinite, shimmer 10s linear infinite;
            }

            /* Smooth page load */
            html {
                scroll-behavior: smooth;
            }

            body {
                animation: fadeIn 0.5s ease-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }

            /* Ripple effect for button */
            .ripple {
                position: absolute;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.5);
                transform: scale(0);
                animation: ripple-animation 0.6s ease-out;
                pointer-events: none;
            }

            @keyframes ripple-animation {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }

            /* Smooth transitions for all interactive elements */
            * {
                -webkit-tap-highlight-color: transparent;
            }
        </style>
    </head>
    <body>
        <div class="auth-container">
            <div class="auth-wrapper">
                <!-- Welcome Section -->
                <div class="auth-welcome">
                    <div class="welcome-content">
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <img src="{% static 'assets/images/lms.png' %}" alt="HarmonyLeave (E/SLMS)" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid rgba(255, 255, 255, 0.3); margin-bottom: 1rem;">
                        </div>
                        <div class="welcome-subtitle">Your Success Hub</div>
                        <h1>WELCOME</h1>
                        <p>Streamline your leave management process with our intuitive and secure platform designed for modern workplaces.</p>
                        <p>Access your dashboard, apply for leave, track requests, and manage your team's time-off efficiently.</p>
                    </div>
                </div>
                
                <!-- Sign In Form -->
                <div class="auth-form">
                    <h2>Sign in</h2>
                    
                    <!-- Error Messages -->
                    {% if messages %}
                        {% for message in messages %}
                            {% if message.tags == 'error' %}
                                <div class="alert alert-error">
                                    <i class="material-icons" style="font-size: 16px; margin-right: 8px;">error_outline</i>
                                    {{message}}
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    
                    <form action="{% url 'doLogin' %}" method="POST">
                        {% csrf_token %}
                        
                        <!-- Email Input -->
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <div style="position: relative;">
                                <i class="material-icons input-icon">person</i>
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    class="form-input" 
                                    placeholder="Enter your email"
                                    required 
                                />
                            </div>
                        </div>
                        
                        <!-- Password Input -->
                        <div class="form-group">
                            <label for="password">Password</label>
                            <div style="position: relative;">
                                <i class="material-icons input-icon">lock</i>
                                <input 
                                    type="password" 
                                    id="password" 
                                    name="password" 
                                    class="form-input" 
                                    placeholder="Enter your password"
                                    required 
                                />
                            </div>
                        </div>
                        
                        <!-- Sign In Button -->
                        <button type="submit" class="btn-primary">
                            <i class="material-icons" style="font-size: 18px;">login</i>
                            Sign in
                        </button>
                        
                        <!-- Forgot Password Link -->
                        <div style="text-align: center; margin-top: 1rem;">
                            <a href="{% url 'password_reset' %}" style="color: var(--primary-blue); text-decoration: none; font-size: 0.875rem; font-weight: 500; display: inline-flex; align-items: center; gap: 0.25rem; transition: opacity 0.2s ease;">
                                <i class="material-icons" style="font-size: 16px;">help_outline</i>
                                Forgot Password?
                            </a>
                        </div>
                        
                    </form>
                    
                    <!-- Footer -->
                    <div style="text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--medium-gray);">
                        <p style="font-size: 0.875rem; color: var(--text-secondary);">
                            Â© 2024 HarmonyLeave (E/SLMS). All rights reserved.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Add some JavaScript for smooth interactions -->
        <script>
            // Wait for DOM to be fully loaded
            document.addEventListener('DOMContentLoaded', function() {
                // Add focus effects to form inputs with animation
                document.querySelectorAll('.form-input').forEach((input, index) => {
                    // Add staggered animation delay
                    input.style.animationDelay = `${0.5 + index * 0.1}s`;
                    
                    input.addEventListener('focus', function() {
                        this.parentElement.classList.add('focused');
                        // Add a subtle bounce effect
                        this.style.transform = 'translateY(-2px) scale(1.01)';
                    });
                    
                    input.addEventListener('blur', function() {
                        this.parentElement.classList.remove('focused');
                        this.style.transform = 'translateY(0) scale(1)';
                    });

                    // Add input typing animation
                    input.addEventListener('input', function() {
                        if (this.value.length > 0) {
                            this.parentElement.classList.add('has-value');
                        } else {
                            this.parentElement.classList.remove('has-value');
                        }
                    });
                });
                
                // Add loading state to submit button with animation
                const form = document.querySelector('form');
                if (form) {
                    form.addEventListener('submit', function(e) {
                        const submitBtn = this.querySelector('.btn-primary');
                        if (submitBtn && !submitBtn.disabled) {
                            const originalText = submitBtn.innerHTML;
                            
                            // Add pulse animation before changing content
                            submitBtn.style.animation = 'pulse 0.3s ease-out';
                            
                            setTimeout(() => {
                                submitBtn.innerHTML = '<div class="loading"></div> Signing in...';
                                submitBtn.disabled = true;
                                submitBtn.style.cursor = 'not-allowed';
                                submitBtn.style.transform = 'scale(0.98)';
                            }, 150);
                            
                            // Re-enable button after 5 seconds (fallback)
                            setTimeout(() => {
                                if (submitBtn.disabled) {
                                    submitBtn.innerHTML = originalText;
                                    submitBtn.disabled = false;
                                    submitBtn.style.cursor = 'pointer';
                                    submitBtn.style.transform = '';
                                }
                            }, 5000);
                        }
                    });
                }

                // Add smooth scroll effect when page loads
                window.addEventListener('load', function() {
                    document.body.style.opacity = '1';
                });

                // Add ripple effect to button
                const btnPrimary = document.querySelector('.btn-primary');
                if (btnPrimary) {
                    btnPrimary.addEventListener('click', function(e) {
                        const ripple = document.createElement('span');
                        const rect = this.getBoundingClientRect();
                        const size = Math.max(rect.width, rect.height);
                        const x = e.clientX - rect.left - size / 2;
                        const y = e.clientY - rect.top - size / 2;
                        
                        ripple.style.width = ripple.style.height = size + 'px';
                        ripple.style.left = x + 'px';
                        ripple.style.top = y + 'px';
                        ripple.classList.add('ripple');
                        
                        this.appendChild(ripple);
                        
                        setTimeout(() => {
                            ripple.remove();
                        }, 600);
                    });
                }
            });
        </script>
    </body>
</html>