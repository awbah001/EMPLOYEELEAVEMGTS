{% extends 'base.html' %}
{% load static %}

{% block title %}Admin Analytics Dashboard{% endblock %}

{% block content %}
<style>
    .kpi-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border-left: 4px solid;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .kpi-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }
    
    .kpi-card.primary {
        border-left-color: #3b82f6;
    }
    
    .kpi-card.success {
        border-left-color: #10b981;
    }
    
    .kpi-card.warning {
        border-left-color: #f59e0b;
    }
    
    .kpi-card.danger {
        border-left-color: #ef4444;
    }
    
    .kpi-card.info {
        border-left-color: #06b6d4;
    }
    
    .kpi-value {
        font-size: 2.5rem;
        font-weight: bold;
        color: #1f2937;
        margin: 0.5rem 0;
    }
    
    .kpi-label {
        font-size: 0.875rem;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
    }
    
    .kpi-percentage {
        font-size: 0.875rem;
        margin-top: 0.5rem;
        color: #10b981;
        font-weight: 500;
    }
    
    .kpi-detail {
        font-size: 0.8rem;
        color: #9ca3af;
        margin-top: 0.25rem;
    }
    
    .chart-container {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
    }
    
    .chart-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .header-section {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        color: white;
        padding: 2rem;
        border-radius: 12px;
        margin-bottom: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .header-section h1 {
        margin: 0;
        font-size: 2rem;
    }
    
    .header-section p {
        margin: 0.5rem 0 0 0;
        opacity: 0.9;
    }
    
    .year-selector {
        display: flex;
        align-items: center;
        gap: 1rem;
        background: rgba(255, 255, 255, 0.1);
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
    }
    
    .year-selector input {
        background: white;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        color: #1f2937;
        font-weight: 600;
        width: 100px;
    }
    
    .year-selector button {
        background: white;
        color: #3b82f6;
        border: none;
        padding: 0.5rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
    }
    
    .year-selector button:hover {
        background: #f3f4f6;
    }
    
    .stats-section-title {
        font-size: 1.125rem;
        font-weight: 700;
        color: #1f2937;
        margin-top: 2rem;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e5e7eb;
    }
</style>

<!-- Page Header -->
<div class="header-section">
    <div>
        <h1>üõ°Ô∏è Admin Analytics Dashboard</h1>
        <p>System-wide statistics and comprehensive insights</p>
    </div>
    <div class="year-selector">
        <form method="GET" style="display: flex; gap: 1rem; align-items: center;">
            <label for="year_select" style="margin: 0; white-space: nowrap; color: white;">Select Year:</label>
            <input type="number" id="year_select" name="year" value="{{ year }}" min="2020" max="2100">
            <button type="submit">Apply</button>
        </form>
    </div>
</div>

<!-- User Management Section -->
<div class="stats-section-title">üë• User Management & System Overview</div>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="kpi-card primary">
        <div class="kpi-label">Total Users</div>
        <div class="kpi-value">{{ total_users }}</div>
        <div class="kpi-detail">All users in system</div>
    </div>
    
    <div class="kpi-card success">
        <div class="kpi-label">Active Users</div>
        <div class="kpi-value">{{ active_users }}</div>
        <div class="kpi-percentage">{{ active_user_rate }}% active rate</div>
    </div>
    
    <div class="kpi-card danger">
        <div class="kpi-label">Inactive Users</div>
        <div class="kpi-value">{{ inactive_users }}</div>
        <div class="kpi-detail">Disabled accounts</div>
    </div>
    
    <div class="kpi-card info">
        <div class="kpi-label">Total Employees</div>
        <div class="kpi-value">{{ total_employees }}</div>
        <div class="kpi-detail">Employee records</div>
    </div>
    
    <div class="kpi-card primary">
        <div class="kpi-label">Total Departments</div>
        <div class="kpi-value">{{ total_departments }}</div>
        <div class="kpi-detail">Organizational units</div>
    </div>
    
    <div class="kpi-card info">
        <div class="kpi-label">Leave Types Configured</div>
        <div class="kpi-value">{{ total_leave_types }}</div>
        <div class="kpi-detail">{{ active_leave_types }} active</div>
    </div>
</div>

<!-- User Role Distribution -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="kpi-card primary">
        <div class="kpi-label">System Administrators</div>
        <div class="kpi-value">{{ admin_count }}</div>
        <div class="kpi-detail">Admin users</div>
    </div>
    
    <div class="kpi-card success">
        <div class="kpi-label">HR Personnel</div>
        <div class="kpi-value">{{ hr_count }}</div>
        <div class="kpi-detail">HR staff members</div>
    </div>
    
    <div class="kpi-card warning">
        <div class="kpi-label">Department Heads</div>
        <div class="kpi-value">{{ dh_count }}</div>
        <div class="kpi-detail">Department heads</div>
    </div>
    
    <div class="kpi-card info">
        <div class="kpi-label">Employees</div>
        <div class="kpi-value">{{ employee_count }}</div>
        <div class="kpi-detail">Regular employees</div>
    </div>
    
    <div class="kpi-card primary">
        <div class="kpi-label">Public Holidays</div>
        <div class="kpi-value">{{ total_holidays }}</div>
        <div class="kpi-detail">Configured holidays</div>
    </div>
</div>

<!-- Leave Management Section -->
<div class="stats-section-title">üìã Leave Management Statistics</div>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="kpi-card warning">
        <div class="kpi-label">Total Applications</div>
        <div class="kpi-value">{{ total_leaves_applied }}</div>
        <div class="kpi-detail">Year {{ year }}</div>
    </div>
    
    <div class="kpi-card success">
        <div class="kpi-label">Approved Leaves</div>
        <div class="kpi-value">{{ approved_leaves }}</div>
        <div class="kpi-percentage">{{ approval_rate }}% approval</div>
    </div>
    
    <div class="kpi-card warning">
        <div class="kpi-label">Pending Approvals</div>
        <div class="kpi-value">{{ pending_leaves }}</div>
        <div class="kpi-detail">Awaiting decision</div>
    </div>
    
    <div class="kpi-card danger">
        <div class="kpi-label">Rejected Leaves</div>
        <div class="kpi-value">{{ rejected_leaves }}</div>
        <div class="kpi-detail">Not approved</div>
    </div>
    
    <div class="kpi-card success">
        <div class="kpi-label">Total Leave Days Used</div>
        <div class="kpi-value">{{ total_leave_days }}</div>
        <div class="kpi-detail">Days of approved leave</div>
    </div>
    
    <div class="kpi-card info">
        <div class="kpi-label">Employees with Leave</div>
        <div class="kpi-value">{{ employees_with_leave }}</div>
        <div class="kpi-percentage">{{ utilization_rate }}% utilization</div>
    </div>
    
    <div class="kpi-card primary">
        <div class="kpi-label">Avg Leaves/Employee</div>
        <div class="kpi-value">{{ avg_leaves_per_employee }}</div>
        <div class="kpi-detail">Average across staff</div>
    </div>
</div>

<!-- Charts Row 1 -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
    <!-- Line Chart - Monthly Trend -->
    <div class="chart-container">
        <div class="chart-title">üìÖ Monthly Leave Trend</div>
        <canvas id="monthlyChart" height="100"></canvas>
    </div>
    
    <!-- Pie Chart - User Type Distribution -->
    <div class="chart-container">
        <div class="chart-title">üë§ User Role Distribution</div>
        <div style="max-width: 300px; margin: 0 auto;">
            <canvas id="userTypeChart" height="150"></canvas>
        </div>
    </div>
</div>

<!-- Charts Row 2 -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
    <!-- Pie Chart - Status Distribution -->
    <div class="chart-container">
        <div class="chart-title">ü•ß Leave Status Distribution</div>
        <div style="max-width: 300px; margin: 0 auto;">
            <canvas id="statusChart" height="150"></canvas>
        </div>
    </div>
    
    <!-- Pie Chart - Leave Types -->
    <div class="chart-container">
        <div class="chart-title">üìã Leave Types Distribution</div>
        <div style="max-width: 300px; margin: 0 auto;">
            <canvas id="leaveTypeChart" height="150"></canvas>
        </div>
    </div>
</div>

<!-- Charts Row 3 -->
<div class="chart-container" style="margin-bottom: 2rem;">
    <div class="chart-title">üìä Department-wise Leave Statistics</div>
    <canvas id="departmentChart" height="80"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Color schemes
    const primaryColor = '#3b82f6';
    const successColor = '#10b981';
    const warningColor = '#f59e0b';
    const dangerColor = '#ef4444';
    const lightBlue = 'rgba(59, 130, 246, 0.1)';
    
    // Monthly Trend Chart
    const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
    new Chart(monthlyCtx, {
        type: 'line',
        data: {
            labels: {{ monthly_labels | safe }},
            datasets: [{
                label: 'Leave Applications',
                data: {{ monthly_data }},
                borderColor: primaryColor,
                backgroundColor: lightBlue,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: primaryColor,
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 5,
                pointHoverRadius: 7,
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)'
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            }
        }
    });
    
    // User Type Chart
    const userTypeCtx = document.getElementById('userTypeChart').getContext('2d');
    new Chart(userTypeCtx, {
        type: 'doughnut',
        data: {
            labels: {{ user_type_labels | safe }},
            datasets: [{
                data: {{ user_type_data }},
                backgroundColor: {{ user_type_colors | safe }},
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
    
    // Status Distribution Chart
    const statusCtx = document.getElementById('statusChart').getContext('2d');
    new Chart(statusCtx, {
        type: 'doughnut',
        data: {
            labels: {{ status_labels | safe }},
            datasets: [{
                data: {{ status_data }},
                backgroundColor: [
                    successColor,
                    warningColor,
                    dangerColor
                ],
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
    
    // Leave Type Chart
    const leaveTypeCtx = document.getElementById('leaveTypeChart').getContext('2d');
    const leaveTypeColors = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#14b8a6'];
    new Chart(leaveTypeCtx, {
        type: 'doughnut',
        data: {
            labels: {{ leave_type_labels | safe }},
            datasets: [{
                data: {{ leave_type_data }},
                backgroundColor: leaveTypeColors.slice(0, {{ leave_type_labels | length }}),
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 15,
                        font: {
                            size: 12
                        }
                    }
                }
            }
        }
    });
    
    // Department Chart
    const departmentCtx = document.getElementById('departmentChart').getContext('2d');
    new Chart(departmentCtx, {
        type: 'bar',
        data: {
            labels: {{ dept_labels | safe }},
            datasets: [
                {
                    label: 'Approved',
                    data: {{ dept_approved }},
                    backgroundColor: successColor
                },
                {
                    label: 'Pending',
                    data: {{ dept_pending }},
                    backgroundColor: warningColor
                },
                {
                    label: 'Rejected',
                    data: {{ dept_rejected }},
                    backgroundColor: dangerColor
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    stacked: false,
                    grid: {
                        display: false
                    }
                },
                y: {
                    stacked: false,
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)'
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top'
                }
            }
        }
    });
</script>

{% endblock %}
<style>
    .kpi-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border-left: 4px solid;
    }
    
    .kpi-card.primary {
        border-left-color: #3b82f6;
    }
    
    .kpi-card.success {
        border-left-color: #10b981;
    }
    
    .kpi-card.warning {
        border-left-color: #f59e0b;
    }
    
    .kpi-card.danger {
        border-left-color: #ef4444;
    }
    
    .kpi-value {
        font-size: 2rem;
        font-weight: bold;
        color: #1f2937;
        margin: 0.5rem 0;
    }
    
    .kpi-label {
        font-size: 0.875rem;
        color: #6b7280;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .kpi-percentage {
        font-size: 0.875rem;
        margin-top: 0.5rem;
        color: #10b981;
    }
    
    .chart-container {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        margin-bottom: 2rem;
    }
    
    .chart-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 1.5rem;
    }
    
    .header-section {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        color: white;
        padding: 2rem;
        border-radius: 12px;
        margin-bottom: 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .header-section h1 {
        margin: 0;
        font-size: 2rem;
    }
    
    .year-selector {
        display: flex;
        align-items: center;
        gap: 1rem;
        background: rgba(255, 255, 255, 0.1);
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
    }
    
    .year-selector input {
        background: white;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        color: #1f2937;
        font-weight: 600;
        width: 100px;
    }
    
    .year-selector button {
        background: white;
        color: #3b82f6;
        border: none;
        padding: 0.5rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
    }
    
    .year-selector button:hover {
        background: #f3f4f6;
    }
</style>

<!-- Page Header -->
<div class="header-section">
    <div>
        <h1>üìä Analytics Dashboard</h1>
        <p style="margin: 0; opacity: 0.9;">System-wide leave analytics and statistics</p>
    </div>
    <div class="year-selector">
        <form method="GET" style="display: flex; gap: 1rem; align-items: center;">
            <label for="year_select" style="margin: 0; white-space: nowrap;">Select Year:</label>
            <input type="number" id="year_select" name="year" value="{{ year }}" min="2020" max="2100">
            <button type="submit">Apply</button>
        </form>
    </div>
</div>

<!-- KPI Cards -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div class="kpi-card primary">
        <div class="kpi-label">Total Employees</div>
        <div class="kpi-value">{{ total_employees }}</div>
        <div style="font-size: 0.875rem; color: #6b7280;">Active staff members</div>
    </div>
    
    <div class="kpi-card primary">
        <div class="kpi-label">Total Users</div>
        <div class="kpi-value">{{ total_users }}</div>
        <div class="kpi-percentage">{{ active_user_rate }}% Active</div>
    </div>
    
    <div class="kpi-card success">
        <div class="kpi-label">Total Departments</div>
        <div class="kpi-value">{{ total_departments }}</div>
        <div style="font-size: 0.875rem; color: #6b7280;">Organizational units</div>
    </div>
    
    <div class="kpi-card warning">
        <div class="kpi-label">Leave Applications</div>
        <div class="kpi-value">{{ total_leaves_applied }}</div>
        <div style="font-size: 0.875rem; color: #6b7280;">Year {{ year }}</div>
    </div>
    
    <div class="kpi-card success">
        <div class="kpi-label">Approved Leaves</div>
        <div class="kpi-value">{{ approved_leaves }}</div>
        <div class="kpi-percentage">{{ approval_rate }}% approval rate</div>
    </div>
    
    <div class="kpi-card warning">
        <div class="kpi-label">Pending Approvals</div>
        <div class="kpi-value">{{ pending_leaves }}</div>
        <div style="font-size: 0.875rem; color: #6b7280;">Awaiting decision</div>
    </div>
    
    <div class="kpi-card danger">
        <div class="kpi-label">Rejected Leaves</div>
        <div class="kpi-value">{{ rejected_leaves }}</div>
        <div style="font-size: 0.875rem; color: #6b7280;">Not approved</div>
    </div>
</div>

<!-- Charts Row 1 -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
    <!-- Line Chart - Monthly Trend -->
    <div class="chart-container">
        <div class="chart-title">üìà Monthly Leave Trend</div>
        <canvas id="monthlyChart" height="100"></canvas>
    </div>
    
    <!-- Pie Chart - Status Distribution -->
    <div class="chart-container">
        <div class="chart-title">ü•ß Leave Status Distribution</div>
        <div style="max-width: 300px; margin: 0 auto;">
            <canvas id="statusChart" height="150"></canvas>
        </div>
    </div>
</div>

<!-- Charts Row 2 -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
    <!-- Pie Chart - Leave Types -->
    <div class="chart-container">
        <div class="chart-title">üìã Leave Types Distribution</div>
        <div style="max-width: 300px; margin: 0 auto;">
            <canvas id="leaveTypeChart" height="150"></canvas>
        </div>
    </div>
    
    <!-- Pie Chart - User Types -->
    <div class="chart-container">
        <div class="chart-title">üë• User Types Distribution</div>
        <div style="max-width: 300px; margin: 0 auto;">
            <canvas id="userTypeChart" height="150"></canvas>
        </div>
    </div>
</div>

<!-- Charts Row 3 -->
<div class="chart-container" style="margin-bottom: 2rem;">
    <div class="chart-title">üìä Department-wise Leave Statistics</div>
    <canvas id="departmentChart" height="80"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Color schemes
    const primaryColor = '#3b82f6';
    const successColor = '#10b981';
    const warningColor = '#f59e0b';
    const dangerColor = '#ef4444';
    const lightBlue = 'rgba(59, 130, 246, 0.1)';
    const lightSuccess = 'rgba(16, 185, 129, 0.1)';
    
    // Monthly Trend Chart
    const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
    new Chart(monthlyCtx, {
        type: 'line',
        data: {
            labels: {{ monthly_labels | safe }},
            datasets: [{
                label: 'Leave Applications',
                data: {{ monthly_data }},
                borderColor: primaryColor,
                backgroundColor: lightBlue,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: primaryColor,
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 5,
                pointHoverRadius: 7,
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'top'
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)'
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            }
        }
    });
    
    // Status Distribution Chart
    const statusCtx = document.getElementById('statusChart').getContext('2d');
    new Chart(statusCtx, {
        type: 'doughnut',
        data: {
            labels: {{ status_labels | safe }},
            datasets: [{
                data: {{ status_data }},
                backgroundColor: [
                    successColor,
                    warningColor,
                    dangerColor
                ],
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
    
    // Leave Type Chart
    const leaveTypeCtx = document.getElementById('leaveTypeChart').getContext('2d');
    const leaveTypeColors = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#14b8a6'];
    new Chart(leaveTypeCtx, {
        type: 'doughnut',
        data: {
            labels: {{ leave_type_labels | safe }},
            datasets: [{
                data: {{ leave_type_data }},
                backgroundColor: leaveTypeColors.slice(0, {{ leave_type_labels | length }}),
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 15,
                        font: {
                            size: 12
                        }
                    }
                }
            }
        }
    });
    
    // User Type Chart
    const userTypeCtx = document.getElementById('userTypeChart').getContext('2d');
    new Chart(userTypeCtx, {
        type: 'doughnut',
        data: {
            labels: {{ user_type_labels | safe }},
            datasets: [{
                data: {{ user_type_data }},
                backgroundColor: {{ user_type_colors | safe }},
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
    
    // Department Chart
    const departmentCtx = document.getElementById('departmentChart').getContext('2d');
    new Chart(departmentCtx, {
        type: 'bar',
        data: {
            labels: {{ dept_labels | safe }},
            datasets: [
                {
                    label: 'Approved',
                    data: {{ dept_approved }},
                    backgroundColor: successColor
                },
                {
                    label: 'Pending',
                    data: {{ dept_pending }},
                    backgroundColor: warningColor
                },
                {
                    label: 'Rejected',
                    data: {{ dept_rejected }},
                    backgroundColor: dangerColor
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    stacked: false,
                    grid: {
                        display: false
                    }
                },
                y: {
                    stacked: false,
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)'
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top'
                }
            }
        }
    });
</script>

{% endblock %}
