{% extends 'base.html' %}
{% load static %}

{% block title %}Reports - HR Dashboard{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="modern-card" style="background: var(--gradient-primary); color: var(--white); margin-bottom: 2rem;">
    <div style="display: flex; align-items: center; gap: 1rem;">
        <div style="width: 50px; height: 50px; background: rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
            <i class="material-icons" style="font-size: 1.5rem;">assessment</i>
        </div>
        <div>
            <h2 style="margin: 0; font-size: 1.5rem; font-weight: 600;">Leave Reports & Analytics</h2>
            <p style="margin: 0; opacity: 0.9; font-size: 0.95rem;">Generate and view comprehensive leave reports</p>
        </div>
    </div>
</div>

<!-- Messages -->
{% if messages %}
    {% for message in messages %}
        {% if message.tags == 'error' %}
            <div class="alert alert-error" style="margin-bottom: 1.5rem;">
                <i class="material-icons" style="font-size: 16px; margin-right: 8px;">error_outline</i>
                {{message}}
            </div>
        {% elif message.tags == 'success' %}
            <div class="alert alert-success" style="margin-bottom: 1.5rem;">
                <i class="material-icons" style="font-size: 16px; margin-right: 8px;">check_circle</i>
                {{message}}
            </div>
        {% endif %}
    {% endfor %}
{% endif %}

<!-- Report Types -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <!-- Leave Summary Report -->
    <div class="modern-card" style="border: 2px solid rgba(59, 130, 246, 0.2);">
        <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <i class="material-icons" style="color: white; font-size: 1.5rem;">summarize</i>
            </div>
            <div style="flex: 1;">
                <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Leave Summary</h3>
                <p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary);">Overview of all leave applications by status and type</p>
            </div>
        </div>
        <form method="GET" action="{% url 'hr_reports' %}">
            <input type="hidden" name="type" value="summary">
            <div class="form-group">
                <label for="summary_year">Year</label>
                <input type="number" id="summary_year" name="year" class="form-input" value="{{ current_year }}" min="2020" max="2100">
            </div>
            <button type="submit" class="btn-primary" style="width: 100%;">
                <i class="material-icons" style="font-size: 1rem; margin-right: 0.5rem;">assessment</i>
                View Report
            </button>
        </form>
    </div>
    
    <!-- Staff Leave Balance Report -->
    <div class="modern-card" style="border: 2px solid rgba(16, 185, 129, 0.2);">
        <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #10b981 0%, #047857 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <i class="material-icons" style="color: white; font-size: 1.5rem;">account_balance</i>
            </div>
            <div style="flex: 1;">
                <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Leave Balance</h3>
                <p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary);">Current leave balances for all staff members</p>
            </div>
        </div>
        <a href="{% url 'hr_set_entitlements' %}" class="btn-primary" style="width: 100%; text-decoration: none; text-align: center;">
            <i class="material-icons" style="font-size: 1rem; margin-right: 0.5rem;">account_balance</i>
            View Entitlements
        </a>
    </div>
    
    <!-- Department Report -->
    <div class="modern-card" style="border: 2px solid rgba(249, 115, 22, 0.2);">
        <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <i class="material-icons" style="color: white; font-size: 1.5rem;">business</i>
            </div>
            <div style="flex: 1;">
                <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Department Report</h3>
                <p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary);">Leave statistics by department</p>
            </div>
        </div>
        <form method="GET" action="{% url 'hr_reports' %}">
            <input type="hidden" name="type" value="department">
            <div class="form-group">
                <label for="dept_report_year">Year</label>
                <input type="number" id="dept_report_year" name="year" class="form-input" value="{{ current_year }}" min="2020" max="2100">
            </div>
            <button type="submit" class="btn-primary" style="width: 100%;">
                <i class="material-icons" style="font-size: 1rem; margin-right: 0.5rem;">assessment</i>
                View Report
            </button>
        </form>
    </div>
    
    <!-- Leave Type Report -->
    <div class="modern-card" style="border: 2px solid rgba(139, 92, 246, 0.2);">
        <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <i class="material-icons" style="color: white; font-size: 1.5rem;">category</i>
            </div>
            <div style="flex: 1;">
                <h3 style="margin: 0 0 0.5rem 0; color: var(--text-primary);">Leave Type Report</h3>
                <p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary);">Statistics by leave type</p>
            </div>
        </div>
        <form method="GET" action="{% url 'hr_reports' %}">
            <input type="hidden" name="type" value="leave_type">
            <div class="form-group">
                <label for="leave_type_year">Year</label>
                <input type="number" id="leave_type_year" name="year" class="form-input" value="{{ current_year }}" min="2020" max="2100">
            </div>
            <button type="submit" class="btn-primary" style="width: 100%;">
                <i class="material-icons" style="font-size: 1rem; margin-right: 0.5rem;">assessment</i>
                View Report
            </button>
        </form>
    </div>
</div>

<!-- Recent Reports Summary -->
<div class="modern-card">
    <h3 style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
        <i class="material-icons" style="color: var(--primary-blue);">analytics</i>
        Leave Statistics Overview
    </h3>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
        <!-- Total Leave Applications -->
        <div style="padding: 1.5rem; background: rgba(59, 130, 246, 0.05); border-radius: var(--radius-lg); border-left: 4px solid #3b82f6;">
            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Total Applications</div>
            <div style="font-size: 2rem; font-weight: 700; color: var(--text-primary);">{{ total_applications|default:"0" }}</div>
        </div>
        
        <!-- Approved -->
        <div style="padding: 1.5rem; background: rgba(16, 185, 129, 0.05); border-radius: var(--radius-lg); border-left: 4px solid #10b981;">
            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Approved</div>
            <div style="font-size: 2rem; font-weight: 700; color: #10b981;">{{ approved_applications|default:"0" }}</div>
        </div>
        
        <!-- Pending -->
        <div style="padding: 1.5rem; background: rgba(245, 158, 11, 0.05); border-radius: var(--radius-lg); border-left: 4px solid #f59e0b;">
            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Pending</div>
            <div style="font-size: 2rem; font-weight: 700; color: #f59e0b;">{{ pending_applications|default:"0" }}</div>
        </div>
        
        <!-- Rejected -->
        <div style="padding: 1.5rem; background: rgba(239, 68, 68, 0.05); border-radius: var(--radius-lg); border-left: 4px solid #ef4444;">
            <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.05em;">Rejected</div>
            <div style="font-size: 2rem; font-weight: 700; color: #ef4444;">{{ rejected_applications|default:"0" }}</div>
        </div>
    </div>
</div>

<style>
@media (max-width: 768px) {
    .modern-card {
        padding: 1rem;
    }
}
</style>
{% endblock %}


