<!DOCTYPE html>
<html lang="en">
    {% load static %}
    <head>
        <title>Password Reset Sent - HarmonyLeave (E/SLMS)</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <meta charset="UTF-8">
        
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        
        <!-- Styles -->
        <link href="{% static 'assets/css/custom.css' %}?v=2024e" rel="stylesheet" type="text/css"/>
        
        <style>
            .material-icons {
                font-family: 'Material Icons';
                font-weight: normal;
                font-style: normal;
                font-size: 24px;
                line-height: 1;
                letter-spacing: normal;
                text-transform: none;
                display: inline-block;
                white-space: nowrap;
                word-wrap: normal;
                direction: ltr;
                -webkit-font-feature-settings: 'liga';
                -webkit-font-smoothing: antialiased;
            }
        </style>
    </head>
    <body>
        <div class="auth-container">
            <div class="auth-wrapper" style="max-width: 500px; grid-template-columns: 1fr;">
                <div class="auth-form" style="text-align: center;">
                    <div style="width: 100px; height: 100px; background: rgba(34, 197, 94, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem;">
                        <i class="material-icons" style="color: #16a34a; font-size: 3rem;">check_circle</i>
                    </div>
                    
                    {% if reset_links %}
                        <h2 style="margin: 0 0 1rem 0; font-size: 1.75rem; font-weight: 600; color: var(--text-primary);">Password Reset Link</h2>
                        
                        <div style="background: rgba(249, 115, 22, 0.05); border: 1px solid rgba(249, 115, 22, 0.2); border-radius: var(--radius-md); padding: 1rem; margin-bottom: 1.5rem;">
                            <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                                <i class="material-icons" style="color: #f97316; font-size: 20px; margin-top: 2px;">warning</i>
                                <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">
                                    <strong style="color: var(--text-primary);">Note:</strong> Email delivery is not configured. Use the reset link below to change your password. Save this link - it will expire after use or in 24 hours.
                                </div>
                            </div>
                        </div>
                        
                        {% for link_data in reset_links %}
                            <div style="background: var(--light-gray); border-radius: var(--radius-md); padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--medium-gray);">
                                <div style="margin-bottom: 0.75rem;">
                                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Account:</div>
                                    <div style="font-weight: 600; color: var(--text-primary); font-size: 1rem;">{{ link_data.name }} ({{ link_data.email }})</div>
                                </div>
                                
                                <div style="margin-bottom: 1rem;">
                                    <label style="display: block; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); margin-bottom: 0.5rem;">Reset Link:</label>
                                    <div style="background: #fff; border: 1px solid var(--medium-gray); border-radius: var(--radius-sm); padding: 0.875rem; word-break: break-all; font-family: 'Courier New', monospace; font-size: 0.875rem; color: var(--text-primary);">
                                        {{ link_data.url }}
                                    </div>
                                </div>
                                
                                <button onclick="copyToClipboard('{{ link_data.url }}', this)" class="btn-primary" style="width: 100%; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                                    <i class="material-icons" style="font-size: 18px;">content_copy</i>
                                    Copy Reset Link
                                </button>
                            </div>
                        {% endfor %}
                        
                        <div style="background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(16, 185, 129, 0.1); border-radius: var(--radius-md); padding: 1rem; margin-bottom: 2rem; text-align: left;">
                            <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                                <i class="material-icons" style="color: #10b981; font-size: 20px; margin-top: 2px;">info</i>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem; font-size: 0.875rem;">Next Steps:</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">
                                        <ul style="margin: 0.5rem 0 0 1rem; padding: 0;">
                                            <li>Copy the reset link above</li>
                                            <li>Open it in your browser</li>
                                            <li>Create your new password</li>
                                            <li>If you need help, contact your system administrator</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <h2 style="margin: 0 0 1rem 0; font-size: 1.75rem; font-weight: 600; color: var(--text-primary);">Check Your Email</h2>
                        
                        <p style="margin: 0 0 2rem 0; color: var(--text-secondary); line-height: 1.6;">
                            We've sent password reset instructions to your email address. Please check your inbox and follow the instructions to reset your password.
                        </p>
                        
                        <div style="background: rgba(45, 90, 160, 0.05); border: 1px solid rgba(45, 90, 160, 0.1); border-radius: var(--radius-md); padding: 1rem; margin-bottom: 2rem; text-align: left;">
                            <div style="display: flex; align-items: flex-start; gap: 0.75rem;">
                                <i class="material-icons" style="color: var(--primary-blue); font-size: 20px; margin-top: 2px;">info</i>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary); margin-bottom: 0.25rem; font-size: 0.875rem;">Didn't receive the email?</div>
                                    <div style="font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5;">
                                        <ul style="margin: 0.5rem 0 0 1rem; padding: 0;">
                                            <li>Check your spam/junk folder</li>
                                            <li>Verify you entered the correct email address</li>
                                            <li>Wait a few minutes and try again</li>
                                            <li>Contact your system administrator for assistance</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <a href="{% url 'login' %}" class="btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem; text-decoration: none;">
                            <i class="material-icons" style="font-size: 18px;">arrow_back</i>
                            Back to Login
                        </a>
                        <a href="{% url 'password_reset' %}" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.875rem 1.5rem; background: transparent; color: var(--primary-blue); border: 2px solid var(--primary-blue); border-radius: var(--radius-md); text-decoration: none; font-weight: 500;">
                            <i class="material-icons" style="font-size: 18px;">refresh</i>
                            Try Again
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(function() {
                const originalHTML = button.innerHTML;
                button.innerHTML = '<i class="material-icons" style="font-size: 18px;">check</i> Copied!';
                button.style.background = '#10b981';
                button.style.borderColor = '#10b981';
                setTimeout(function() {
                    button.innerHTML = originalHTML;
                    button.style.background = '';
                    button.style.borderColor = '';
                }, 2000);
            }).catch(function(err) {
                alert('Failed to copy link. Please select and copy manually.');
            });
        }
        </script>
    </body>
</html>

